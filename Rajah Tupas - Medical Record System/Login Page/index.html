<html lang="en">
  <head>
    <meta charset="utf-8">
          
    <title>Login Page</title>
    <meta name="description" content="Figma htmlGenerator">    
    <meta name="author" content="htmlGenerator">
            
    <link rel="stylesheet" href="styles.css">

    <link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="shortcut icon" type="image/png" href="images/ofc_Logo.png"> 
            
    <style>
       /*
        Figma Background for illustrative/preview purposes only.
        You can remove this style tag with no consequence
       */
       body {background: #E5E5E5; }
    </style>
          
  </head>
          
  <body>
    <div class=e4_420>
      <div  class="e12_2181"> </div>
      <div  class="e12_2182"> </div>
      <div  class="e12_2183"> </div>
      <div  class="e12_2184"> </div>
      <div  class="e14_2204"> </div>
      <div  class="e14_2213"> </div>
      <span class="vW_Back">Welcome Back!</span>
      <span class="vN_See">Nice to see you again</span>
      <div class="name"></div>
      <form class="form-floating" id="floating">
        <div class="form-floating">
          <input class="form-control" type="text" id="floatingEmail" placeholder="Enter Email" aria-label="default input example">
          <label for="floatingEmail">Email</label>
          <i class="fas fa-check-circle"></i>
          <i class="fas fa-exclamation-circle"></i>
          <small>Error message</small>
        </div>
        <div class="form-floating">
          <input type="password" class="form-control" id="floatingPassword" placeholder="Password">
          <label for="floatingPassword">Password</label>
          <i class="fas fa-check-circle"></i> 
          <i class="fas fa-exclamation-circle"></i>
          <i class="fa-regular fa-eye-slash showHidePw"></i>
          <!--<i class="uil uil-eye-slash showHidePw"></i> -->
          <small>Error message</small>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" checked>
          <label class="form-check-label" for="flexCheckChecked">Keep me logged in</label>
        </div>
        <div class="Forgot_Password">
          <a href="#" class="text">Forgot Password?</a>
        </div>
        <div class="C_Acc1">
          <div class="C_Acc2"></div>  
          <div class="C_Acc3">
            <button class="btn" style="background-color:transparent" type="submit">Login</button>
          </div>
        </div>
      </form>
      <div class="Or1">
        <div class="name"></div>
        <div class="name"></div>
        <span class="Or2">or</span>
      </div>
      <div class="User_Logo">
        <i class="fa-regular fa-user"></i>
      </div>
      <div class="Pass_Logo">
        <img src="images/padlock2.png" style="width: 40px;">
      </div>
      <div class="SignUp_FB_Border">
        <div class="SignUp_FB"></div>
        <div class="SignUp_FB_Text">
        <a href="#" class="btn" style="background-color:transparent" type="submit">Login with Facebook</a>
        </div>
        <div class="FB_Logo">
          <img src="images/facebook.png" style="width: 33px;">
        </div>
      </div>
      <div class="SignUp_Google_Border"></div>
        <div class="SignUp_Google">
        </div>
        <div class="SignUp_Google_Text">
        <a href="#" class="btn" style="background-color:transparent" type="submit">Login with Google</a>
        </div>
      <div class="Google_Logo">
        <img src="images/google.png" style="width: 33px;">
      </div>
      <span class="New_Acc">New here? </span>
      <div class="Create_Acc">
        <a href="#" class="link" style="background-color:transparent" type="submit">Create an Account</a>
      </div>
    </div>
  
    <!-- partial -->
  <script  src="./loginpage.js"></script>

  <script type="module">
    // Import the functions you need from the SDKs you need


    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-analytics.js";
    import { getDatabase, set, ref, update } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, FacebookAuthProvider,signInWithPopup, signInWithRedirect, getRedirectResult } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBju8Bjp1PU8hpQaYhzu7CS81B9Zq6Tubk",
      authDomain: "erm-system-33be8.firebaseapp.com",
      databaseURL: "https://erm-system-33be8-default-rtdb.firebaseio.com",
      projectId: "erm-system-33be8",
      storageBucket: "erm-system-33be8.appspot.com",
      messagingSenderId: "1080942188838",
      appId: "1:1080942188838:web:2f1c49b62bc7d00aae09e7",
      measurementId: "G-RRB0LHPBLV"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth();
    const database = getDatabase(app);
    const provider = new FacebookAuthProvider();

  floating.addEventListener('submit',(e) => {

    var email = document.getElementById('floatingEmail').value;
    var password = document.getElementById('floatingPassword').value;

    signInWithEmailAndPassword(auth, email, password)
    .then((userCredential) => {
      // Signed in 
      const user = userCredential.user;

      const dt = new Date();
       update(ref(database, 'users/' + user.uid),{
        last_login: dt,
      })

       alert('User logged in!');
      // ...
    })
    .catch((error) => {
      const errorCode = error.code;
      const errorMessage = error.message;

      alert(errorMessage);
})


})

    </script>


  </body>
</html>